import "dart:math" as hB;import "dart:async" as ZB;import "dart:html" as sB;import "dart:indexed_db" as RF;import "dart:web_sql" as UH;import "dart:mirrors" as qJ;import "dart:typed_data" as rJ;import "dart:web_audio" as SF;import "dart:json" as pJ;class sJ{static const  tJ="Chrome";static const  uJ="Firefox";static const  vJ="Internet Explorer";static const  wJ="Safari";final  iI;final  minimumVersion;const sJ(this.iI,[this.minimumVersion]);}class xJ{final  name;const xJ(this.name);}var TF={"asteroid-0-0.png":{"frame":{"x":106,"y":810,"w":98,"h":100},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":17,"w":98,"h":100},"sourceSize":{"w":128,"h":128}},"asteroid-0-1.png":{"frame":{"x":369,"y":754,"w":94,"h":114},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":18,"y":10,"w":94,"h":114},"sourceSize":{"w":128,"h":128}},"asteroid-0-10.png":{"frame":{"x":479,"y":212,"w":114,"h":110},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":11,"y":11,"w":114,"h":110},"sourceSize":{"w":128,"h":128}},"asteroid-0-11.png":{"frame":{"x":597,"y":100,"w":114,"h":112},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":6,"y":8,"w":114,"h":112},"sourceSize":{"w":128,"h":128}},"asteroid-0-12.png":{"frame":{"x":220,"y":696,"w":108,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":7,"y":12,"w":108,"h":106},"sourceSize":{"w":128,"h":128}},"asteroid-0-13.png":{"frame":{"x":334,"y":586,"w":108,"h":112},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":6,"y":12,"w":108,"h":112},"sourceSize":{"w":128,"h":128}},"asteroid-0-14.png":{"frame":{"x":580,"y":510,"w":110,"h":110},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":10,"w":110,"h":110},"sourceSize":{"w":128,"h":128}},"asteroid-0-15.png":{"frame":{"x":662,"y":634,"w":106,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":9,"w":106,"h":106},"sourceSize":{"w":128,"h":128}},"asteroid-0-16.png":{"frame":{"x":0,"y":698,"w":108,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":7,"y":7,"w":108,"h":106},"sourceSize":{"w":128,"h":128}},"asteroid-0-17.png":{"frame":{"x":363,"y":100,"w":118,"h":92},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":19,"w":118,"h":92},"sourceSize":{"w":128,"h":128}},"asteroid-0-18.png":{"frame":{"x":245,"y":196,"w":116,"h":90},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":20,"w":116,"h":90},"sourceSize":{"w":128,"h":128}},"asteroid-0-19.png":{"frame":{"x":228,"y":286,"w":114,"h":98},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":5,"y":16,"w":114,"h":98},"sourceSize":{"w":128,"h":128}},"asteroid-0-2.png":{"frame":{"x":208,"y":902,"w":94,"h":116},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":18,"y":12,"w":94,"h":116},"sourceSize":{"w":128,"h":128}},"asteroid-0-20.png":{"frame":{"x":921,"y":114,"w":102,"h":110},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":9,"y":6,"w":102,"h":110},"sourceSize":{"w":128,"h":128}},"asteroid-0-21.png":{"frame":{"x":394,"y":868,"w":94,"h":110},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":4,"w":94,"h":110},"sourceSize":{"w":128,"h":128}},"asteroid-0-22.png":{"frame":{"x":768,"y":656,"w":96,"h":110},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":11,"y":7,"w":96,"h":110},"sourceSize":{"w":128,"h":128}},"asteroid-0-23.png":{"frame":{"x":108,"y":706,"w":108,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":9,"y":11,"w":108,"h":104},"sourceSize":{"w":128,"h":128}},"asteroid-0-24.png":{"frame":{"x":707,"y":320,"w":114,"h":98},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":7,"y":13,"w":114,"h":98},"sourceSize":{"w":128,"h":128}},"asteroid-0-25.png":{"frame":{"x":593,"y":316,"w":114,"h":102},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":5,"y":14,"w":114,"h":102},"sourceSize":{"w":128,"h":128}},"asteroid-0-26.png":{"frame":{"x":226,"y":384,"w":112,"h":110},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":5,"y":12,"w":112,"h":110},"sourceSize":{"w":128,"h":128}},"asteroid-0-27.png":{"frame":{"x":114,"y":264,"w":114,"h":114},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":5,"y":5,"w":114,"h":114},"sourceSize":{"w":128,"h":128}},"asteroid-0-28.png":{"frame":{"x":910,"y":564,"w":110,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":6,"y":7,"w":110,"h":106},"sourceSize":{"w":128,"h":128}},"asteroid-0-29.png":{"frame":{"x":361,"y":284,"w":114,"h":108},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":6,"w":114,"h":108},"sourceSize":{"w":128,"h":128}},"asteroid-0-3.png":{"frame":{"x":921,"y":452,"w":98,"h":112},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":15,"y":8,"w":98,"h":112},"sourceSize":{"w":128,"h":128}},"asteroid-0-30.png":{"frame":{"x":711,"y":210,"w":114,"h":110},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":5,"y":4,"w":114,"h":110},"sourceSize":{"w":128,"h":128}},"asteroid-0-31.png":{"frame":{"x":800,"y":550,"w":110,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":9,"y":4,"w":110,"h":106},"sourceSize":{"w":128,"h":128}},"asteroid-0-32.png":{"frame":{"x":442,"y":648,"w":106,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":14,"y":6,"w":106,"h":106},"sourceSize":{"w":128,"h":128}},"asteroid-0-33.png":{"frame":{"x":825,"y":214,"w":96,"h":114},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":15,"y":1,"w":96,"h":114},"sourceSize":{"w":128,"h":128}},"asteroid-0-34.png":{"frame":{"x":302,"y":884,"w":92,"h":116},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":17,"y":0,"w":92,"h":116},"sourceSize":{"w":128,"h":128}},"asteroid-0-35.png":{"frame":{"x":821,"y":328,"w":100,"h":112},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":13,"y":4,"w":100,"h":112},"sourceSize":{"w":128,"h":128}},"asteroid-0-36.png":{"frame":{"x":0,"y":494,"w":112,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":10,"y":8,"w":112,"h":104},"sourceSize":{"w":128,"h":128}},"asteroid-0-37.png":{"frame":{"x":358,"y":392,"w":112,"h":96},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":10,"w":112,"h":96},"sourceSize":{"w":128,"h":128}},"asteroid-0-38.png":{"frame":{"x":338,"y":488,"w":110,"h":98},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":10,"y":10,"w":110,"h":98},"sourceSize":{"w":128,"h":128}},"asteroid-0-39.png":{"frame":{"x":224,"y":588,"w":108,"h":108},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":10,"y":8,"w":108,"h":108},"sourceSize":{"w":128,"h":128}},"asteroid-0-4.png":{"frame":{"x":0,"y":598,"w":112,"h":100},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":6,"y":16,"w":112,"h":100},"sourceSize":{"w":128,"h":128}},"asteroid-0-40.png":{"frame":{"x":921,"y":224,"w":100,"h":116},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":15,"y":6,"w":100,"h":116},"sourceSize":{"w":128,"h":128}},"asteroid-0-41.png":{"frame":{"x":104,"y":912,"w":104,"h":112},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":10,"y":5,"w":104,"h":112},"sourceSize":{"w":128,"h":128}},"asteroid-0-42.png":{"frame":{"x":0,"y":380,"w":112,"h":114},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":3,"w":112,"h":114},"sourceSize":{"w":128,"h":128}},"asteroid-0-43.png":{"frame":{"x":481,"y":100,"w":116,"h":112},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":6,"y":5,"w":116,"h":112},"sourceSize":{"w":128,"h":128}},"asteroid-0-44.png":{"frame":{"x":811,"y":440,"w":110,"h":110},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":11,"y":6,"w":110,"h":110},"sourceSize":{"w":128,"h":128}},"asteroid-0-45.png":{"frame":{"x":448,"y":534,"w":108,"h":114},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":14,"y":2,"w":108,"h":114},"sourceSize":{"w":128,"h":128}},"asteroid-0-46.png":{"frame":{"x":470,"y":422,"w":110,"h":112},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":14,"y":5,"w":110,"h":112},"sourceSize":{"w":128,"h":128}},"asteroid-0-47.png":{"frame":{"x":0,"y":804,"w":106,"h":108},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":17,"y":9,"w":106,"h":108},"sourceSize":{"w":128,"h":128}},"asteroid-0-48.png":{"frame":{"x":112,"y":600,"w":108,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":14,"y":14,"w":108,"h":106},"sourceSize":{"w":128,"h":128}},"asteroid-0-49.png":{"frame":{"x":245,"y":100,"w":118,"h":96},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":9,"y":15,"w":118,"h":96},"sourceSize":{"w":128,"h":128}},"asteroid-0-5.png":{"frame":{"x":589,"y":418,"w":112,"h":92},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":5,"y":23,"w":112,"h":92},"sourceSize":{"w":128,"h":128}},"asteroid-0-50.png":{"frame":{"x":363,"y":192,"w":116,"h":92},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":17,"w":116,"h":92},"sourceSize":{"w":128,"h":128}},"asteroid-0-51.png":{"frame":{"x":800,"y":0,"w":122,"h":100},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":14,"w":122,"h":100},"sourceSize":{"w":128,"h":128}},"asteroid-0-52.png":{"frame":{"x":922,"y":0,"w":102,"h":114},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":16,"y":9,"w":102,"h":114},"sourceSize":{"w":128,"h":128}},"asteroid-0-53.png":{"frame":{"x":825,"y":100,"w":96,"h":114},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":21,"y":11,"w":96,"h":114},"sourceSize":{"w":128,"h":128}},"asteroid-0-54.png":{"frame":{"x":652,"y":740,"w":96,"h":108},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":21,"y":10,"w":96,"h":108},"sourceSize":{"w":128,"h":128}},"asteroid-0-55.png":{"frame":{"x":556,"y":620,"w":106,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":11,"w":106,"h":106},"sourceSize":{"w":128,"h":128}},"asteroid-0-56.png":{"frame":{"x":475,"y":322,"w":114,"h":100},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":6,"y":15,"w":114,"h":100},"sourceSize":{"w":128,"h":128}},"asteroid-0-57.png":{"frame":{"x":593,"y":212,"w":114,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":9,"y":10,"w":114,"h":104},"sourceSize":{"w":128,"h":128}},"asteroid-0-58.png":{"frame":{"x":114,"y":378,"w":112,"h":114},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":11,"y":2,"w":112,"h":114},"sourceSize":{"w":128,"h":128}},"asteroid-0-59.png":{"frame":{"x":0,"y":264,"w":114,"h":116},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":9,"y":6,"w":114,"h":116},"sourceSize":{"w":128,"h":128}},"asteroid-0-6.png":{"frame":{"x":224,"y":494,"w":110,"h":94},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":8,"y":21,"w":110,"h":94},"sourceSize":{"w":128,"h":128}},"asteroid-0-60.png":{"frame":{"x":701,"y":418,"w":110,"h":110},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":11,"y":11,"w":110,"h":110},"sourceSize":{"w":128,"h":128}},"asteroid-0-61.png":{"frame":{"x":112,"y":492,"w":112,"h":108},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":14,"w":112,"h":108},"sourceSize":{"w":128,"h":128}},"asteroid-0-62.png":{"frame":{"x":711,"y":100,"w":114,"h":110},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":9,"y":13,"w":114,"h":110},"sourceSize":{"w":128,"h":128}},"asteroid-0-63.png":{"frame":{"x":690,"y":528,"w":110,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":8,"y":17,"w":110,"h":106},"sourceSize":{"w":128,"h":128}},"asteroid-0-7.png":{"frame":{"x":548,"y":726,"w":104,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":11,"w":104,"h":106},"sourceSize":{"w":128,"h":128}},"asteroid-0-8.png":{"frame":{"x":921,"y":340,"w":98,"h":112},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":13,"y":6,"w":98,"h":112},"sourceSize":{"w":128,"h":128}},"asteroid-0-9.png":{"frame":{"x":0,"y":912,"w":104,"h":112},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":14,"y":8,"w":104,"h":112},"sourceSize":{"w":128,"h":128}},"bullet_dummy.png":{"frame":{"x":228,"y":264,"w":4,"h":4},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":4,"h":4},"sourceSize":{"w":4,"h":4}},"hud_dummy.png":{"frame":{"x":0,"y":0,"w":800,"h":100},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":800,"h":100},"sourceSize":{"w":800,"h":100}},"spaceship.png":{"frame":{"x":0,"y":100,"w":245,"h":164},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":245,"h":164},"sourceSize":{"w":245,"h":164}},"spaceship_thrusters.png":{"frame":{"x":296,"y":802,"w":73,"h":82},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":41,"w":73,"h":82},"sourceSize":{"w":367,"h":164}},"star_00.png":{"frame":{"x":204,"y":810,"w":92,"h":92},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":18,"y":18,"w":92,"h":92},"sourceSize":{"w":128,"h":128}},"upgrade_bullet_amount.png":{"frame":{"x":338,"y":464,"w":20,"h":20},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":20,"h":20},"sourceSize":{"w":20,"h":20}},"upgrade_bullet_strength.png":{"frame":{"x":338,"y":444,"w":20,"h":20},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":20,"h":20},"sourceSize":{"w":20,"h":20}},"upgrade_health.png":{"frame":{"x":338,"y":424,"w":20,"h":20},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":20,"h":20},"sourceSize":{"w":20,"h":20}},"upgrade_hyperdrive.png":{"frame":{"x":338,"y":404,"w":20,"h":20},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":20,"h":20},"sourceSize":{"w":20,"h":20}},"upgrade_thruster.png":{"frame":{"x":338,"y":384,"w":20,"h":20},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":20,"h":20},"sourceSize":{"w":20,"h":20}}}; main(){WH();var u=VH();var g=sB.query('#gamecontainer');var i=sB.query('#hudcontainer');var m=new Map<String,tC>();TF.forEach((k,v){m[k]=new tC(TF[k]);});sB.window.setImmediate((){g.width=CB;g.height=NB;i.width=CB;i.height=RI;ZB.Future.wait(u).then((o){i.context2D..textBaseline='top'..font='20px D3Radicalism';var p=new WD(o[0],m);g.focus();var h=new XH(g,i,p);g.onBlur.listen((j)=>h.pause());g.onFocus.listen((j)=>h.unpause());g.onKeyDown.listen((j){if(j.keyCode==sB.KeyCode.P){if(BB.paused){h.unpause();}else{h.pause();}}});h.start();});});} VH(){var i=['game_assets.png'];var g=new ZB.Completer<sB.ImageElement>();var h=new List<ZB.Future>();i.forEach((j){var g=new ZB.Completer();h.add(g.future);LI.MI(j,(k){g.complete(k);});});return h;} WH(){var i={'tabStory':'story','tabControls':'controls','tabCredits':'credits','tabDebug':'debug'};var g='tabStory';i.forEach((h,k){var j=sB.query('#${h}');var m=sB.query('#${k}');j.onClick.listen((o){if(h!=g){j.classes.add('selectedTab');m.classes.remove('hidden');sB.query('#${g}').classes.remove('selectedTab');sB.query('#${i[g]}').classes.add('hidden');g=h;}});});}class XH{var dD;var XG;var dB;var MD;var tE;var CF;var cG=0;var SC;var aD;var PD;var pG;var BF;var OD;var qG;var rG;var DF;XH(this.dD,this.XG,this.dB){MD=dD.context2D;tE=XG.context2D;aD=FI(sB.window.location.href);DF=0.5;} start(){SC=new cB();PD=new PB();pG=new IB(100*DF);BF=new kB();OD=new pB();qG=new OB();rG=new IC();IG(SC,0);SC.DC=16;SC.process();RG(16);} pause(){BB.paused=true;if(sB.document.activeElement!=dD){CF.YJ();}} unpause(){BB.paused=false;} RG( g){SC.DC=g-cG;cG=g;SC.process();if(!BB.paused){if(OD.MB&&!OD.QD&&!BB.yE){WJ();}}sB.window.animationFrame.then(RG);} IG( g, v){var k=hB.pow(1.2,v);BB.eG=k;var m=new eE();var j=new AC();g.CE(j);g.CE(m);var o=HB/2;var p=GB/2;var u=45*DF;var h=g.gC();h.t(new q(o,p,angle:-hB.PI/2));h.t(new w(0.0,0.0));h.t(new aB('spaceship.png',scale:0.25));h.t(new LB(u));h.t(new uC('#1fe9f6'));h.t(new eC(-10,-10));h.t(PD);h.t(pG);h.t(BF);h.t(OD);h.t(qG);h.t(rG);h.fC();var i=g.gC();i.t(new DB());i.fC();gI(g,m);eI(g,o,p,u,k);hI(g);j.register(i,GC);j.register(h,bC);CF=new EI(dD);g.QB(CF);g.QB(new RK());g.QB(new PK());g.QB(new QK());g.QB(new SK());g.QB(new UK());g.QB(new VK());g.QB(new WK());g.QB(new YK());g.QB(new ZK());g.QB(new OK());g.QB(new XK());g.QB(new TK());g.QB(new JI(MD));g.QB(new JK(MD));g.QB(new KK(MD,dB));g.QB(new FK(MD,dB));g.QB(new LK(MD));g.QB(new NK(tE));g.QB(new MK(tE,dB));g.QB(new EK(aD));g.QB(new yJ());g.QB(new GK(dD));g.QB(new DK(BB));g.initialize();} gI( i, j){for(int h=0;h<hB.sqrt(HB*GB)/5;h++ ){var g=i.gC();g.t(new q(WB.nextDouble()*HB,WB.nextDouble()*GB));g.fC();j.add(g,oF);}} eI( v, JB, UB, u, j){for(int h=0;h<hB.sqrt(HB*GB)/100;h++ ){var i=HC(0.2,0.5);var g=v.gC();var m=WB.nextDouble()*HB;var k=WB.nextDouble()*GB;var p=50*i;while (bE.gE(JB,UB,u*3,m,k,p)){m=WB.nextDouble()*HB;k=WB.nextDouble()*GB;}g.t(new q(m,k,angle:WB.nextDouble()*KB.LC,rotationRate:HC(0.15,0.20)));g.t(pF(0.025*j,0.1*j));var o=new List<String>(64);for(int h=0;h<64;h++ ){o[h]='asteroid-0-${h}.png';}g.t(new aB.qK(o,scale:i));g.t(new LB(p));g.t(new IB(100*i*j));g.t(new uC('#333'));g.t(new PB(maxHealth:100*i*j));g.t(new vC(HC(2,4).round().toInt()));g.t(new eC(10*i,100*i*j));g.fC();}} hI( g){for(int h=0;h<4;h++ ){YD(g,new cC('health',healthGain:5,fillHealth:true,massGain:1));}for(int h=0;h<hB.min(1,iE-BF.RC);h++ ){YD(g,new cC('bullet_amount',bullets:1,massGain:5));}YD(g,new cC('bullet_strength',bulletDamageGain:0.5,massGain:1));if(!OD.enabled){YD(g,new cC('hyperdrive',enableHyperDrive:true,massGain:10));}YD(g,new cC('thruster',thrustGain:0.00004,massGain:1));} YD( j, i){var h=1.0;var g=j.gC();g.t(new q(WB.nextDouble()*HB,WB.nextDouble()*GB));g.t(pF(0.025,0.1));g.t(new aB('upgrade_${i.name}.png',scale:h));g.t(new LB(10*h));g.t(new IB(20*h));g.t(new uC('#00FF00'));g.t(i);g.fC();} WJ(){BB.yE=true;var h=SC.vB(new AC().runtimeType);var g=h.eB(bC);g.t(new OC(angle:KB.kH,velocity:0.7));g.IE();var j=rI(BB.JE+1);j.then((i){if(!PD.hC){SC=i;h=SC.vB(new AC().runtimeType);g=h.eB(bC);g.FF(OC);g.IE();OD.QD=true;BB.yE=false;BB.JE++ ;}});} rI( h){var g=new ZB.Completer<cB>();pE(g,h);return g.future;} pE( h, g,[ elapsed=0]){if(BB.paused){new ZB.Timer(new Duration(milliseconds:500),(){pE(h,g,elapsed);});}else{if(elapsed<8000){new ZB.Timer(new Duration(milliseconds:500),(){pE(h,g,elapsed+500);});}else{var i=new cB();IG(i,g);h.complete(i);}}}}class yJ extends GD{var yI=sB.query('#fps');var UJ=sB.query('#playerPos');var jI=sB.query('#cameraPos');var uI=sB.query('#entityCount');var gJ=sB.query('#playerThrust');var jB;var kD;var lB;var qD;var YB; initialize(){jB=new s<DB>(DB,n);kD=new s<q>(q,n);qD=new s<OB>(OB,n);lB=new s<IB>(IB,n);YB=n.vB(new AC().runtimeType);} xB(){var m=YB.eB(GC);var g=YB.eB(bC);var i=jB.get(m);var j=kD.get(g);var h=qD.get(g);var k=lB.get(g);var o=1000~/n.DC;yI.text='${o}';jI.text='x: ${i.x}; y: ${i.y}';UJ.text='x: ${j.x}; y: ${j.y}';gJ.text='Thrust: ${h.pD}; Mass: ${k.value}; q: ${100*hB.sqrt(h.pD/k.value)}m/s^2';uI.text='${n.NG.dI}';}} XE( g, h, i)=>g<h?h:g>i?i:g;class RD{static final  ZH=sB.window.navigator.userAgent.contains(r'Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone');static  bH( g){var h=new sB.CanvasElement(width:g.width,height:g.height);h.context2D.drawImage(g,0,0);return h;}static  YE( g){var m=0,i=0,p=0,j=0,o=0,k=0;var h=g.currentTarget;do{m+= h.offset.left;i+= h.offset.top;}while(null!=(h=h.offsetParent));if(null!=g.page.x||null!=g.page.y){o=g.page.x;k=g.page.y;}p=o-m;j=k-i;return new sB.Point(p,j);}}class YH{final  HG;YH.gK(this.HG); get sK=>HG.canvas; tK( g)=>RD.YE(g); get uK=>RD.ZH; get onMouseMove{var g;if(uK){g=sK.onTouchMove;}else{g=sK.onMouseMove;}return g.map((h)=>tK(h));} get onMouseDown{var i=new ZB.StreamController<cH>();var h;if(uK){h=sK.onTouchStart;}else{h=sK.onMouseDown;}h.listen((g){g.preventDefault();i.add(new cH(tK(g),g.button));});return i.stream;} get onKeyDown=>sB.document.onKeyDown.map((g)=>g.keyCode); get onKeyUp=>sB.document.onKeyUp.map((g)=>g.keyCode);} UF([var selector, height]){var g;if(null==selector||selector is int){var h=(selector!=null?selector:sB.window.innerWidth);height=(height!=null?height:sB.window.innerHeight);g=new sB.CanvasElement(width:h,height:height);}else if(selector is String){g=sB.query(selector);}else if(selector is sB.ImageElement){g=RD.bH(selector);}else if(selector is wD){return selector;}else{g=selector;}return new wD(g);}class wD implements sB.CanvasRenderingContext2D{static final  aH=new RegExp((r'\s+'));var sK;var vK;var wK; get canvas=>sK; get context2D=>vK;wD(this.sK){vK=sK.context2D;wK=new YH.gK(this);} noSuchMethod( g)=>qJ.reflect(vK).delegate(g); dJ({ strokeStyle, fillStyle}){if(null!=strokeStyle){var g=vK.strokeStyle;vK..strokeStyle=strokeStyle..stroke()..strokeStyle=g;}if(null!=fillStyle){var g=vK.fillStyle;vK..fillStyle=fillStyle..fill()..fillStyle=g;}} sI( m, j, g, h){var i=new sB.CanvasElement(width:g,height:h);var k=i.context2D;k.drawImageScaledFromSource(sK,m,j,g,h,0,0,g,h);sK.width=g;sK.height=h;clear();vK.drawImage(i,0,0);} trim({ color}){var m;var p;var o;if(color!=null){p=new zJ.hK(color).hJ();m=p[4]==255?true:false;}else m=true;var u=vK.getImageData(0,0,sK.width,sK.height);var i=u.data;var g=[sK.width,sK.height,0,0];for(var h=0,v=i.length;h<v;h+= 4){if(m){if(i[h+3]==0)continue;}else if(i[h+0]==color[0]&&i[h+1]==color[1]&&i[h+2]==color[2])continue;var j=(h~/4)%sK.width;var k=(h~/4)~/sK.width;if(j<g[0])g[0]=j;if(j>g[2])g[2]=j;if(k<g[1])g[1]=k;if(k>g[3])g[3]=k;}if(g[2]==0||g[3]==0){}else{o=new sB.Rect(g[0],g[1],g[2]-g[0],g[3]-g[1]);sI(g[0],g[1],g[2]-g[0]+1,g[3]-g[1]+1);}return o;} clear({ color}){if(null!=color){vK.fillStyle=color;vK.fillRect(0,0,sK.width,sK.height);}else{vK.clearRect(0,0,sK.width,sK.height);}} copy(){var g=new sB.CanvasElement(width:sK.width,height:sK.height);g.context2D.drawImage(sK,0,0);return g;} cJ({ hue, saturation, lightness}){var p=null==hue?null:hue.toDouble();var JB=null==saturation?null:saturation.toDouble();var k=null==lightness?null:lightness.toDouble();var m=vK.getImageData(0,0,sK.width,sK.height);var h=m.data;var v,o,u;var j;var i;for(var g=0,UB=h.length;g<UB;g+= 4){j=eH(h[g+0],h[g+1],h[g+2]);v=p==null?j[0]:XE(p,0,1);o=JB==null?j[1]:XE(JB,0,1);u=k==null?j[2]:XE(k,0,1);i=fH(v,o,u);h[g+0]=i[0];h[g+1]=i[1];h[g+2]=i[2];}vK.putImageData(m,0,0);} vG( h, g, j, k, i,{ strokeStyle, fillStyle}){vK..beginPath()..moveTo(h+i,g)..lineTo(h+j-i,g)..quadraticCurveTo(h+j,g,h+j,g+i)..lineTo(h+j,g+k-i)..quadraticCurveTo(h+j,g+k,h+j-i,g+k)..lineTo(h+i,g+k)..quadraticCurveTo(h,g+k,h,g+k-i)..lineTo(h,g+i)..quadraticCurveTo(h,g,h+i,g)..closePath();dJ(strokeStyle:strokeStyle,fillStyle:fillStyle);} DJ( JB, p, v, j,[ maxWidth]){var UB=new RegExp(r"(\d+)");var m=int.parse(UB.firstMatch(font).group(0))*2;var k=TG(JB,maxWidth);var u=vK.fillStyle;for(var h=0;h<k.length;h++ ){var i=(v+h*m*0.6).toInt();var o=vK.createLinearGradient(0,i,0,(i+m*0.6).toInt());for(var g=0;g<j.length;g+= 2){o.addColorStop(j[g],j[g+1]);}vK..fillStyle=o..fillText(k[h],p,i);}vK.fillStyle=u;} fJ( g,[ maxWidth]){var i=new RegExp(r"(\d+)");var h=int.parse(i.firstMatch(font).group(0))*2;var j=TG(g,maxWidth);if(null==maxWidth){maxWidth=vK.measureText(g).width;}return new sB.Rect(0,0,maxWidth,(j.length*h*0.6).toInt());} TG( o,[ maxWidth]){var m=o.split(aH);var i=0;var v=0;var g=new List<String>.from([""]);var u=vK.measureText(" ").width;if(null!=maxWidth){maxWidth+= u;var j=0;for(var h=0;h<m.length;h++ ){var p="${m[h]} ";var k=vK.measureText(p).width;if(i+k>maxWidth){g.add("");j++ ;i=0;}g[j]="${g[j]}${p}";i+= k;}}else{g=[o];}return g;}}class cH{final  position;final  button;cH(this.position,this.button);}class zJ{var r,QG,b,a;zJ.hK( h,[this.a=255]){var g=dH(h);r=g[0];QG=g[1];b=g[2];} hJ()=>[r,QG,b,a];} dH( g){return [int.parse('0x${g[1]}${g[2]}'),int.parse('0x${g[3]}${g[4]}'),int.parse('0x${g[5]}${g[6]}')];} eH( m, h, i){var g=hB.max(hB.max(m,h),i),k=hB.min(hB.min(m,h),i);var j,p,u=(g+k)/(2*255);if(g==k){j=p=0.0;}else{var o=g-k;p=u>0.5?o/(2*255-g-k):o/(g+k);if(g==m){j=(h-i)/o+(h<i?6:0);}else if(g==h){j=(i-m)/o+2;}else if(g==i){j=(m-h)/o+4;}j/= 6.0;}return [j,p,u];} fH( UB, JB, yB){var o=UB.toDouble();var k=JB.toDouble();var j=yB.toDouble();var m;var p;var u;if(k==0.0){m=p=u=j;}else{var v=( h, i, g){if(g<0)g+= 1;if(g>1)g-= 1;if(g<1/6)return h+(i-h)*6*g;if(g<1/2)return i;if(g<2/3)return h+(i-h)*(2/3-g)*6;return h;};var i=j<0.5?j*(1+k):j+k-j*k;var h=2*j-i;m=v(h,i,o+1/3);p=v(h,i,o);u=v(h,i,o-1/3);}return [(m*255+0.5).toInt(),(p*255+0.5).toInt(),(u*255+0.5).toInt()];}class gH{static var WF=0;static var xD;static  iH( h){if(null==xD){xD=new Map<Type,int>();}var g=xD[h];if(g==null){g=1<<WF;WF++ ;xD[h]=g;}return g;}}abstract class VF{ DE( g); oE( g); zC( g); enabled( g); disabled( g);}class ZE extends YC{var yK;var CL;ZE():yK=new AB<AB<mB>>(),CL=new AB<l>(); initialize(){} PL( g){TL(g,(h,i){h[g.id].SL();h[g.id]=null;});g.aL=0;} fL( i, j, k){var h=j.id;yK.lL(h);var g=yK[h];if(g==null){g=new AB<mB>();yK[h]=g;}g[i.id]=k;i.qL(j.FE);} rL( g, h){if((g.aL&h.FE)!=0){var i=h.id;yK[i][g.id].SL();yK[i][g.id]=null;g.tL(h.FE);}} BJ( i){var h=i.id;yK.lL(h);var g=yK[h];if(g==null){g=new AB<mB>();yK[h]=g;}return g;} yL( h, j){var i=j.id;var g=yK[i];if(g!=null&&g.YG(h.id)){return g[h.id];}return null;} TL( i, j( components, index)){var g=i.aL;var h=0;while (g>0){if((g&1)==1){j(yK[h],h);}h++ ;g=g>>1;}} zC( g)=>CL.add(g); pI(){CL.forEach((g)=>PL(g));CL.clear();}}class XC{static var cE=1;static var hH=0;var BL=0;var DL=0;XC(){BL=cE;cE=cE<<1;DL=hH++ ;} get FE=>BL; get id=>DL;}class SD{static var XF=new Map<Type,XC>();static  TD( h){var g=XF[h];if(g==null){g=new XC();XF[h]=g;}return g;}static  lH( g)=>TD(g).FE;}class aE extends YC{var xK;var zK;var FL;var GL=0;var HL=0;var IL=0;var CL=0;var NL;aE():xK=new AB<l>(),zK=new AB<l>(),FL=new AB<bool>(),NL=new uH(); initialize(){} iL(){var g=zK.removeLast();if(null==g){g=new l.jK(AL,NL.oI());}IL++ ;return g;} DE( g){GL++ ;HL++ ;xK[g.id]=g;} enabled( g){FL[g.id]=false;} disabled( g){FL[g.id]=true;} zC( g){xK[g.id]=null;FL[g.id]=false;zK.add(g);GL-- ;CL++ ;} isActive( g)=>xK[g]!=null; xL( g)=>xK[g]; get dI=>GL;}class bE{static  gE( p, j, k, m, u, o){var g=m-p;var i=u-j;var h=k+o;return (g*g+i*i)<(h*h);}}abstract class YC implements VF{var AL; initialize(); DE( g){} oE( g){} zC( g){} disabled( g){} enabled( g){}}class zB<tB>{var EL;zB.iK(this.EL); operator[]( g)=>EL[g]; get size=>EL.size; get isEmpty=>EL.isEmpty; contains( g)=>EL.contains(g); forEach( g( element))=>EL.forEach(g);}class KB{static const  YF=hB.PI;static const  jH=0.5*YF;static const  LC=2.0*YF;static const  kH=LC-jH;static  rC(final  g)=>aF.rC(g);static  MC( g)=>aF.MC(g);}class l{final  id;var YL=0;var aL=0;var xD=0;var AL;var RL;var WL;l.jK(this.AL,this.id){RL=AL.NG;WL=AL.FG;} qL( g){aL|= g;} tL( g){aL&= ~g;} uL( g){xD|= g;} vL( g){xD&= ~g;} toString()=>"Entity[${id}]"; t( g){WL.fL(this,SD.TD(g.runtimeType),g);} FF( g){WL.rL(this,SD.TD(g));} get MB=>RL.isActive(id); zI( g){return WL.yL(this,g);} AJ( g){return zI(SD.TD(g));} fC()=>AL.fI(this); cD()=>AL.tI(this); IE()=>AL.nI(this);}abstract class qC extends ZC{qC( g):super(g); lC( g); lD( h)=>h.forEach((g)=>lC(g)); XB()=>true;}class s<yD extends mB>{var LL;var OL;s( h, g){this.LL=SD.TD(h);OL=g.FG.BJ(this.LL);}yD get( g)=>OL[g.id] as yD; wB( g){if(OL.YG(g.id)){return OL[g.id] as yD;}return null;}}class AB<tB>{var JL;var KL=0;var ML;AB({ capacity: 16}):JL=new List(capacity){ML=new zB.iK(this);} operator[]( g)=>JL[g]; get size=>KL; get readOnly=>ML; get isEmpty=>KL==0; forEach( h( element)){for(int g=0;g<KL;g++ ){h(JL[g]);}} removeLast(){if(KL>0){var g=JL[ --KL];JL[KL]=null;return g;}return null;} remove( i){for(int g=0;g<KL;g++ ){var h=JL[g];if(i==h){JL[g]=JL[ --KL];JL[KL]=null;return true;}}return false;} contains( h){for(int g=0;KL>g;g++ ){if(h==JL[g]){return true;}}return false;} get mI=>JL.length; add( g){if(KL==JL.length){FM();}JL[KL++ ]=g;} operator[]=( g, h){if(g>=JL.length){GM(g*2);}if(KL<=g){KL=g+1;}JL[g]=h;} FM(){var g=((JL.length*3)/2+1).toInt();GM(g);} GM( h){var g=JL;JL=new List<tB>(h);JL.setRange(0,g.length,g);} lL( g){if(g>=JL.length){GM(g*2);}} clear(){for(int g=0;g<KL;g++ ){JL[g]=null;}KL=0;} addAll( h){for(int g=0;h.size>g;g++ ){add(h[g]);}} YG( g)=>g<mI; toString()=>"[${JL.join(',')}]";}abstract class mB{ SL(){}}class ZF{static var dE=new Map<Type,AB<sC>>();static sC mH( i, j){var h=nH(i);var g=h.removeLast();if(null==g){g=j();}return g;}static  nH( h){var g=dE[h];if(null==g){g=new AB();dE[h]=g;}return g;}static  pH( g){dE[g.runtimeType].add(g);}}class AC extends YC{final  QL;final  UL;AC():QL=new Map<String,l>(),UL=new Map<l,String>(); register( g, h){QL[h]=g;UL[g]=h;} unregister( g){UL.remove(QL.remove(g));} eB( g)=>QL[g]; zC( h){var g=UL.remove(h);if(g!=null){QL.remove(g);}} initialize(){}}abstract class GD extends ZC{GD():super(TB.vH()); lD( g)=>xB(); xB(); XB()=>true;}class cB{final  RL=new aE();final  WL=new ZE();final  HL=new AB<l>();final  dL=new AB<l>();final  CL=new AB<l>();final  kL=new AB<l>();final  mL=new AB<l>();final  nL=new Map<Type,ZC>();final  oL=new List<ZC>();final  pL=new Map<Type,YC>();final  sL=new AB<YC>();var DC;cB(){CE(RL);CE(WL);} initialize(){sL.forEach((h)=>h.initialize());oL.forEach((g)=>g.initialize());} get NG=>RL; get FG=>WL; CE( g){pL[g.runtimeType]=g;sL.add(g);g.AL=this;} vB( g){return pL[g];} gC(){return RL.iL();} eB( g){return RL.xL(g);} QB( g,{ passive: false}){g.n=this;g.jL=passive;nL[g.runtimeType]=g;oL.add(g);return g;} zL( i, h(EntityObserver,Entity)){i.forEach((g){sL.forEach((j)=>h(j,g));oL.forEach((k)=>h(k,g));});i.clear();} process(){sG();oL.forEach((g){if(!g.QJ){g.process();}});} sG(){zL(HL,(h,g)=>h.DE(g));zL(dL,(h,g)=>h.oE(g));zL(mL,(h,g)=>h.disabled(g));zL(kL,(h,g)=>h.enabled(g));zL(CL,(h,g)=>h.zC(g));WL.pI();} fI( g)=>HL.add(g); nI( g)=>dL.add(g); tI( g){if(!CL.contains(g)){CL.add(g);}}}class eE extends YC{final  VL;final  XL;eE():VL=new Map<String,AB<l>>(),XL=new Map<l,AB<String>>(); initialize(){} add( i, j){var h=VL[j];if(h==null){h=new AB<l>();VL[j]=h;}h.add(i);var g=XL[i];if(g==null){g=new AB<String>();XL[i]=g;}g.add(j);} ZJ( h){var g=XL[h];if(g!=null){g.forEach((j){var i=VL[j];if(i!=null){i.remove(h);}});g.clear();}} CJ( h){var g=VL[h];if(g==null){g=new AB<l>();VL[h]=g;}return g.readOnly;} zC( g)=>ZJ(g);}class aF{static  MC( g)=>sH((g*cF).toInt()&fE);static  rC( g)=>tH((g*cF).toInt()&fE);static final  oH=12;static final  fE=~(-1<<oH);static final  zD=fE+1;static final  bF=hB.PI*2.0;static final  cF=zD/bF;static final  qH=dF(hB.sin);static final  rH=dF(hB.cos);static  sH(g)=>qH[g];static  tH(g)=>rH[g];static dF( i( x)){var h=new List<double>(zD);for(int g=0;g<zD;g++ ){h[g]=i((g+0.5)/zD*bF);}return h;}}abstract class ZC implements VF{var ZL=0;var n;var bL;var cL;var eL;var gL;var hL;var jL;ZC( g):bL=new AB<l>(),cL=g.vF,eL=g.vI,gL=g.PJ{hL=cL==0&&gL==0;ZL=gH.iH(runtimeType);}get QJ=>jL; yF(){} process(){if(XB()){yF();lD(bL.readOnly);end();}} end(){} lD( g); XB(); initialize(){} HJ( g){} aJ( g){} zL( g){if(hL){return;}var i=AM(g);var h=(cL&g.aL)==cL;if(gL>0&&h){h=(gL&g.aL)>0;}if(eL>0&&h){h=(eL&g.aL)==0;}if(h&&!i){DM(g);}else if(!h&&i){EM(g);}} AM( g)=>(ZL&g.xD)==ZL; DM( g){bL.add(g);g.uL(ZL);HJ(g);} EM( g){bL.remove(g);g.vL(ZL);aJ(g);} DE( g)=>zL(g); oE( g)=>zL(g); enabled( g)=>zL(g); zC( g){if(AM(g)){EM(g);}} disabled( g){if(AM(g)){EM(g);}}}class SB extends mB with sC{ SL(){OJ();} EG(){}}class TB{var cL=0;var eL=0;var gL=0; wF( g){cL=wL(cL,g);return this;}static  qB( h){var g=new TB();g.wF(h);return g;}static  vH()=>new TB(); get vF=>cL; get vI=>eL; get PJ=>gL; wL( g, h){if(null!=h){h.forEach((i){g=g|SD.lH(i);});}return g;}}typedef  eF();abstract class sC{factory sC.kK( g, h){return ZF.mH(g,h);} EG(); OJ(){EG();ZF.pH(this);}}class uH{var BM;var CM=0;uH():BM=new AB<int>(); oI(){if(BM.size>0){return BM.removeLast();}return CM++ ;}}abstract class wH<UD> extends AE<UD>{var SE;wH():super.lK(); open(){SE=HM();IM=true;return new ZB.Future.value(true);} HM(); KM(){return new ZB.Stream.fromIterable(SE.keys);} LM( h, g){SE[g]=h;return new ZB.Future.value(g);} NM(){return new ZB.Stream.fromIterable(SE.values);}}class xH<UD> extends AE<UD>{static final  zH="1";static const  AI=5*1024*1024;var LD;var rB;var estimatedSize;var JM;xH(this.LD,this.rB,{this.estimatedSize: AI}):super.lK();static  get fF=>UH.SqlDatabase.supported; open(){if(!fF){return new ZB.Future.error(new UnsupportedError('WebSQL is not supported on this platform'));}var g=new ZB.Completer();JM=sB.window.openDatabase(LD,zH,LD,estimatedSize);MM(g);return g.future;} MM( h){var i='CREATE TABLE IF NOT EXISTS ${rB} (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT)';JM.transaction((g){g.executeSql(i,[] ,(g,k){IM=true;h.complete(true);});},(j)=>h.completeError(j));} KM(){var k='SELECT id FROM ${rB}';var g=new ZB.StreamController();JM.transaction((j){j.executeSql(k,[] ,(j,i){for(var h=0;h<i.rows.length; ++h){var m=i.rows.item(h);g.add(m['id']);}});},(o)=>g.addError(o),()=>g.close());return g.stream;} LM( j, h){var g=new ZB.Completer();var k='INSERT OR REPLACE INTO ${rB} (id, value) VALUES (?, ?)';JM.transaction((i){i.executeSql(k,[h,j],(i,o){g.complete(h);});},(m)=>g.completeError(m));return g.future;} NM(){var k='SELECT id,value FROM ${rB}';var g=new ZB.StreamController<UD>();JM.transaction((j){j.executeSql(k,[] ,(j,i){for(var h=0;h<i.rows.length; ++h){var m=i.rows.item(h);g.add(m['value']);}});},(o)=>g.addError(o),()=>g.close());return g.stream;}}class yH<UD> extends AE<UD>{var LD;var version;var JM;var rB;yH(this.LD,this.rB,{this.version: 1}):super.lK(){if(version==null){throw new ArgumentError("version must not be null");}}static  get fF=>RF.IdbFactory.supported; open(){if(!fF){return new ZB.Future.error(new UnsupportedError('IndexedDB is not supported on this platform'));}return sB.window.indexedDB.open(LD,version:version,onUpgradeNeeded:(g){JM=g.target.result;if(!JM.objectStoreNames.contains(rB)){JM.createObjectStore(rB);}}).then((h){JM=h;IM=true;return true;});} LM( g, i){return OM(( h){return h.put(g,i);});} OM( h( store),[ txnMode='readwrite']){var k=new ZB.Completer();var g=JM.transaction(rB,txnMode);var i=g.objectStore(rB);var j=h(i);return g.completed.then((lK)=>j);} PM( h( cursor)){var g=new ZB.StreamController<UD>();var j=JM.transaction(rB,'readonly');var i=j.objectStore(rB);i.openCursor(autoAdvance:true).listen((k)=>g.add(h(k)),onDone:()=>g.close(),onError:(m)=>g.addError(m));return g.stream;} NM(){return PM(( g)=>g.value);} KM(){return PM(( g)=>g.key);}}class AK<UD> extends wH<UD>{ HM(){return sB.window.localStorage;}}abstract class AE<UD>{var IM=false; get JJ=>IM;AE.lK();factory AE( h, g,[ options]){if(yH.fF){if(options!=null&&options['version']!=null){return new yH(h,g,version:options['version']);}else{return new yH(h,g);}}else if(xH.fF){if(options!=null&&options['estimatedSize']){return new xH(h,g,estimatedSize:options['estimatedSize']);}else{return new xH(h,g);}}else{return new AK();}}QM(){if(!JJ)throw new StateError('${runtimeType} is not open');} open(); keys(){QM();return KM();} KM(); save( h, g){QM();if(g==null){throw new ArgumentError("key must not be null");}return LM(h,g);} LM( g, h); vF(){QM();return NM();} NM();}const BK=const CK();class CK{const CK();}class gF{var QF=0;var ZD=0.0;var ED=0.0;var AH=0.0;var bD=0.0;var KF=0.3;var PE=0.0;var RE=0.0;var KE=0.0;var FH=0.0;var PF=0.0;var JD=0.0;var HE=0.0;var zG=0.0;var LG=0.0;var QE=0.0;var iD=0.0;var jD=0.0;var ND=0.0;var gG=0.0;var vE=0.0;var ME=0.0;var WG=0.0;var fD=0.0;gF.nK( j){var g=j.split(",");this.QF=BI(g[0]);this.ZD=RB(g[1]);this.ED=RB(g[2]);this.AH=RB(g[3]);this.bD=RB(g[4]);this.KF=RB(g[5]);this.PE=RB(g[6]);this.RE=RB(g[7]);this.KE=RB(g[8]);this.FH=RB(g[9]);this.PF=RB(g[10]);this.JD=RB(g[11]);this.HE=RB(g[12]);this.zG=RB(g[13]);this.LG=RB(g[14]);this.QE=RB(g[15]);this.iD=RB(g[16]);this.jD=RB(g[17]);this.ND=RB(g[18]);this.gG=RB(g[19]);this.vE=RB(g[20]);this.ME=RB(g[21]);this.WG=RB(g[22]);this.fD=RB(g[23]);if(this.ED<.01){this.ED=.01;}var i=this.ZD+this.ED+this.bD;if(i<.18){var h=.18/i;this.ZD*= h;this.ED*= h;this.bD*= h;}}static  BI( g){if(g==null||g.length==0){return 0;}return int.parse(g,radix:10);}static  RB( g){if(g==null||g.length==0){return 0.0;}return double.parse(g);}}class nB{static const hF="sfxr:";final  RM;var SM;var TM; get url=>TM;var UM;var WM=false;var YM='';var aM=false;var dM=false;nB.mK(this.RM,this.SM,this.TM); jM(){aM=false;UM=null;} NF(){return {"_url":TM,"_name":SM};} qI(){WM=false;YM='OK';} vM( g){WM=true;YM=g;} xM( g, h){if(g==null){vM('Error decoding buffer.');h.complete(this);return;}qI();UM=g;aM=true;h.complete(this);} AN( i, h){var j=i.response;RM.wM.decodeAudioData(j,(g)=>xM(g,h),(g)=>xM(g,h));} HN( h, g){vM('Error fetching data');g.complete(this);} load(){if(url==null){vM('No URL set.');return new ZB.Future<nB>.value(this);}jM();if(url.startsWith(hF)){return new ZB.Future<nB>.delayed(new Duration(milliseconds:1),(){UM=CI.DI(RM.wM,url.substring(hF.length));aM=true;return this;});}var g=new sB.HttpRequest();var h=new ZB.Completer<nB>();if(dM){g.open('GET',url);}else{g.open('GET','${RM.baseURL}/${url}');}g.responseType='arraybuffer';g.onLoad.listen((i)=>AN(g,h));g.onError.listen((i)=>HN(g,h));g.onAbort.listen((i)=>HN(g,h));g.send();return h.future;} get length{if(UM==null){return 0;}return UM.duration;}}class NC{final  VM;final  XM;final  ZM;var bM;var cM;var eM;var fM;var gM=1.0; get isScheduled=>bM==null?false:bM.playbackState==SF.AudioBufferSourceNode.SCHEDULED_STATE; get IJ=>bM==null?false:bM.playbackState==SF.AudioBufferSourceNode.FINISHED_STATE;NC.mK(this.VM,this.XM,this.ZM){tM();} uM(){if(bM!=null){print('${bM.playbackState}');}} tM(){bM=VM.RM.wM.createBufferSource();if(XM!=null&&XM.UM!=null){bM.buffer=XM.UM;bM.loopStart=0.0;bM.loopEnd=XM.UM.duration;}bM.gain.value=gM;bM.loop=ZM;bM.connect(VM.iM,0,0);} DN(){if(bM!=null){bM.stop(0.0);}bM=null;} get pause=>cM!=null; set pause( g){if(g){if(cM!=null){return;}IN();}else{if(cM==null){return;}JN();}} KN(){assert(eM!=null);var g=VM.RM.wM.currentTime;var h=g-eM;if(g<fM){return g-fM;}if(ZM){return h%bM.buffer.duration;}return h;} IN(){if(eM==null){return;}print('Sound.pause');uM();if(bM!=null){cM=KN();DN();print('paused at ${cM}');}} JN(){if(cM==null){return;}print('Sound.resume');uM();tM();if(cM<0.0){cM=-cM;print('Scheduling to play sound in ${cM}.');fM=VM.RM.wM.currentTime+cM;bM.start(fM,0.0,bM.buffer.duration);eM=VM.RM.wM.currentTime;}else{print('Starting to play at offset ${cM}');fM=VM.RM.wM.currentTime;bM.start(fM,cM,bM.buffer.duration-cM);eM=VM.RM.wM.currentTime-cM;}cM=null;} play([ when=0.0]){DN();tM();fM=VM.RM.wM.currentTime+when;bM.start(fM);eM=VM.RM.wM.currentTime;} stop(){DN();eM=null;fM=null;cM=null;} get volume=>gM; set volume( g){if(bM!=null){bM.gain.value=g;}gM=g;}}class aC{aC(); NF(){var g=new Map();g['masterVolume']=yM.gain.value;g['musicVolume']=zM.gain.value;g['sourceVolume']=BN.gain.value;g['clips']=CN;g['sources']=EN;g['music']=GN;return g;} get fD=>yM.gain.value; set fD( g){lG=false;yM.gain.value=g;} set lG( g){if(g){if(mM!=null){return;}mM=yM.gain.value;yM.gain.value=0;}else{if(mM==null){return;}yM.gain.value=mM;mM=null;}} hG( h, i){var g=CN[h];if(g!=null){return g;}g=new nB.mK(this,h,i);CN[h]=g;return g;} MJ( h){var g=EN[h];if(g!=null){return g;}g=new VD.mK(this,h,BN);EN[h]=g;return g;} oG( g, h,[ looped=false]){return RJ(0.0,g,h,looped);} RJ( j, i, k,[ looped=false]){var g=EN[i];if(g==null){print('Could not find source ${i}');return null;}var h=CN[k];if(h==null){print('Could not find clip ${k}');return null;}if(looped){return g.SJ(j,h);}else{return g.TJ(j,h);}}}class VD{var RM;var SM;var hM;var iM;var kM;var lM;var mM;var nM=false;var oM=0.0;var pM=0.0;var qM=0.0;var rM=true; sM(){kM.disconnect(0);iM.disconnect(0);if(rM){iM.connect(kM,0,0);kM.connect(hM,0,0);}else{iM.connect(hM,0,0);}}VD.mK(this.RM,this.SM,this.hM){iM=RM.wM.createGain();kM=RM.wM.createPanner();kM.coneOuterGain=1.0;sM();lM=new List<NC>();} set VJ( g){if(g!=rM){rM=g;sM();}} get volume=>iM.gain.value; set volume( g){iM.gain.value=g;} NF(){return {"_name":SM,"volume":iM.gain.value,"_mutedVolume":mM,"_isPaused":nM,"_x":oM,"_y":pM,"_z":qM};} set lG( g){if(g){if(mM!=null){return;}mM=volume;volume=0.0;}else{if(mM==null){return;}volume=mM;mM=null;}} TJ( i, h){var g=new NC.mK(this,h,false);lM.add(g);g.play(i);g.pause=pause;return g;} SJ( i, h){var g=new NC.mK(this,h,true);lM.add(g);g.play(i);g.pause=pause;return g;} LN(){for(int g=lM.length-1;g>=0;g-- ){var h=lM[g];if(h.IJ){var i=lM.length-1;lM[g]=lM[i];lM.removeLast();print('removing sound.');h.stop();}}} get pause=>nM; set pause( g){if(g){if(nM==true){return;}IN();nM=true;}else{if(nM==false){return;}JN();nM=false;}} IN(){LN();lM.forEach((g){g.pause=true;});} JN(){LN();lM.forEach((g){g.pause=false;});} stop(){lM.forEach((g){g.stop();});LN();} get x=>oM; get y=>pM;}class CI{final  MN;var NN,ON,PN,QN,RN,SN,TN,UN,VN,WN;var XN,YN;CI( this.MN); reset(){var g=this.MN;QN=100/(g.KF*g.KF+.001);RN=100/(g.PE*g.PE+.001);SN=1-g.RE*g.RE*g.RE*.01;TN=-g.KE*g.KE*g.KE*.000001;if(g.QF==0){VN=.5-g.zG/2;WN=-g.LG*.00005;}UN=g.JD>0?1-g.JD*g.JD*.9:1+g.JD*g.JD*10;XN=0;YN=(g.HE==1?0:(1-g.HE)*(1-g.HE)*20000+32).toInt();} iJ(){this.reset();var g=this.MN;NN=g.ZD*g.ZD*100000;ON=g.ED*g.ED*100000;PN=g.bD*g.bD*100000+10;return (NN+ON+PN).toInt();} eJ( m, o){var g=this.MN;var ZN=g.ND!=1||g.ME!=0,aN=g.ME*g.ME*.1,bN=1+g.WG*.0003,cN=g.ND*g.ND*g.ND*.1,dN=1+g.gG*.0001,eN=g.ND!=1,fN=g.fD*g.fD,gN=g.PE,hN=g.iD!=0||g.jD!=0,iN=g.jD*g.jD*g.jD*.2,jN=g.iD*g.iD*(g.iD<0?-1020:1020),kN=(g.QE!=0)?(((1-g.QE)*(1-g.QE)*20000).toInt())+32:0,lN=g.AH,mN=g.FH/2,nN=g.PF*g.PF*.01,oN=g.QF;var pN=NN,qN=1/NN,rN=1/ON,sN=1/PN;var tN=5/(1+g.vE*g.vE*20)*(.01+cN);if(tN>.8){tN=.8;}tN=1-tN;var uN=false;var vN=0.0,wN=0.0,xN=0.0,yN=0.0,zN=0.0,AO=0.0,BO=0.0,CO=0.0,DO=0.0,EO=0.0,FO=0.0;var GO=0,HO=0,IO=0,JO=0,KO=0,LO=0;var k=new hB.Random();var MO=new List<double>(1024),NO=new List<double>(32);for(var h=MO.length-1;h>-1;h-- ){MO[h]=0.0;}for(var h=NO.length-1;h>-1;h-- ){NO[h]=k.nextDouble()*2-1;}for(var h=0;h<o;h++ ){if(uN){return true;}if(kN!=0){if( ++LO>=kN){LO=0;this.reset();}}if(YN!=0){if( ++XN>=YN){YN=0;QN*= UN;}}SN+= TN;QN*= SN;if(QN>RN){QN=RN;if(gN>0){uN=true;}}EO=QN;if(mN>0){FO+= nN;EO*= 1+hB.sin(FO)*mN;}GO=EO.toInt();if(GO<8){GO=8;}if(oN==0){VN+= WN;if(VN<0){VN=0.0;}else if(VN>.5){VN=.5;}}if( ++vN>pN){vN=0.0;switch ( ++IO){case 1:pN=ON;break;case 2:pN=PN;break;}}switch (IO){case 0:wN=vN*qN;break;case 1:wN=1+(1-vN*rN)*2*lN;break;case 2:wN=1-vN*sN;break;case 3:wN=0.0;uN=true;break;}if(hN){jN+= iN;KO=jN.toInt();if(KO<0){KO=-KO;}else if(KO>1023){KO=1023;}}if(ZN&&bN!=0.0){aN*= bN;if(aN<.00001){aN=.00001;}else if(aN>.1){aN=.1;}}DO=0.0;for(var j=0;j<8;j++ ){HO++ ;if(HO>=GO){HO%= GO;if(oN==3){for(var i=NO.length-1;i>-1;i-- ){NO[i]=k.nextDouble()*2-1;}}}switch (oN){case 0:CO=((HO/GO)<VN)?.5:-.5;break;case 1:CO=1-(HO/GO)*2;break;case 2:BO=HO/GO;BO=BO>.5?(BO-1)*6.28318531:BO*6.28318531;CO=BO<0?1.27323954*BO+.405284735*BO*BO:1.27323954*BO-.405284735*BO*BO;CO=CO<0?.225*(CO*-CO-CO)+CO:.225*(CO*CO-CO)+CO;break;case 3:CO=NO[(HO*32/GO).abs().toInt()];break;}if(ZN){zN=AO;cN*= dN;if(cN<0){cN=0;}else if(cN>.1){cN=.1;}if(eN){yN+= (CO-AO)*cN;yN*= tN;}else{AO=CO;yN=0.0;}AO+= yN;xN+= AO-zN;xN*= 1-aN;CO=xN;}if(hN){MO[JO%1024]=CO;CO+= MO[(JO-KO+1024)%1024];JO++ ;}DO+= CO;}DO*= .125*wN*fN;DO=DO>=1?1.0:DO<=-1?-1.0:DO;m[h]=DO;}return false;}static  DI( j, k){var i=new CI(new gF.nK(k));var h=i.iJ();var g=j.createBuffer(2,h,44100);assert(h<=g.length);i.eJ(g.getChannelData(0),h);return g;}}class FK extends BE{var context;var dB;var nD;var sD;var xC;FK(this.context,this.dB):super(TB.qB([aB,q])); initialize(){super.initialize();nD=new s<aB>(aB,n);sD=new s<oB>(oB,n);} yF(){var g=YB.eB(GC);xC=jB.get(g);} mD( g){var h=nD.get(g);drawImage(g,h);} drawImage( k, h){var g=EB.get(k);var j=sD.wB(k);context.save();try {context.lineWidth=0.5;context.fillStyle="white";context.strokeStyle="white";context.beginPath();if(xC.x>HB-CB&&g.x<CB){context.translate(HB,0);}if(xC.y>GB-NB&&g.y<NB){context.translate(0,GB);}context.translate(g.x,g.y);if(null!=j){context.globalAlpha=j.nG;}var m=h.scale;if(h.uE){var p=(g.angle.round()%h.TC.length).toInt();var i=dB.oD[h.TC[p]];KG(i,m);}else{context.rotate(g.angle);h.TC.forEach((o){var i=dB.oD[o];KG(i,m);});}context.closePath();context.fill();context.stroke();}finally {context.restore();}} KG( g, h){var i=new sB.Rect(g.EC.left*h,g.EC.top*h,g.EC.width*h,g.EC.height*h);context.drawImageToRect(dB.NE,i,sourceRect:g.src);}}class EI extends XD{const  UI=sB.KeyCode.W;const  LEFT=sB.KeyCode.A;const  RIGHT=sB.KeyCode.D;const  aI=sB.KeyCode.J;const  sF=sB.KeyCode.H;var JC=new Map<int,bool>();var TE=0.0,UE=0.0;var DD;var uD;var uB;var FB;var gB;var OF;var canvas;var state;var ZG;var aG;EI(this.canvas); initialize(){super.initialize();var g=new s<w>(w,n);var j=new s<kB>(kB,n);var h=new s<aB>(aB,n);var i=new s<pB>(pB,n);var k=new s<OB>(OB,n);var m=new s<IC>(IC,n);DD=h.get(fB);uD=g.get(fB);uB=j.get(fB);FB=i.get(fB);gB=k.get(fB);OF=m.get(fB);ZG=canvas.onKeyDown.listen(EJ);aG=canvas.onKeyUp.listen(FJ);} xB(){if(cI){FB.MB=JC[sF]==true;DD.TC=['spaceship.png'];uB.CD=false;gB.MB=false;gB.WC=OB.HD;ZG.cancel();aG.cancel();}else{if(bI){if(!gB.MB){if(TE<100.0&&TE>0.0&&UE<100.0&&UE>0.0&&OF.lI){OF.MB=true;}gB.MB=true;DD.TC=['spaceship.png','spaceship_thrusters.png'];TE=0.0;}TE+= n.DC;}else{if(gB.MB){UE=0.0;gB.MB=false;DD.TC=['spaceship.png'];}UE+= n.DC;}if(jJ){gB.WC=OB.SI;}else if(kJ){gB.WC=OB.TI;}else{gB.WC=OB.HD;}uB.CD=CD;}} YJ()=>JC.keys.forEach((g)=>JC[g]=false); get bI=>JC[UI]==true; get jJ=>JC[LEFT]==true; get kJ=>JC[RIGHT]==true; get cI=>JC[sF]==true&&FB.enabled; get CD=>JC[aI]==true; EJ( g){JC[g.keyCode]=true;} FJ( g){JC[g.keyCode]=false;} XB()=>BB.UC&&status.FC>0&&!FB.MB;}class hE{const YI=CB-350;const ZI=50;const XI=300;const WI=50;const VI=70;static var iF=0;var label,content;var rect;var sE=false;hE(this.label,{this.content}){rect=new sB.Rect(YI,ZI+iF*VI,XI,WI);iF++ ;}}class WD{var NE;var oD;WD(this.NE,this.oD);}class DK extends GD{var eD;var PD;var MF;DK(this.eD); initialize(){var h=n.vB(AC);var g=h.eB(bC);PD=g.AJ(PB);} xB(){var g=new HK(eD.JE,eD.BD.toInt());MF=new AE<String>('space-off','highscore');MF.open().then((OO)=>MF.save(pJ.stringify(g),g.dateTime.toString()));eD.VG=true;} XB()=>PD.hC&&!eD.VG;}class EK extends qC{var aD;var xG;EK(this.aD):super(TB.qB([dC])); initialize(){xG=new s<dC>(dC,n);} lC( g){var h=xG.get(g);aD.oG(h.source,h.clip);g.FF(dC);g.IE();}}class tC{var src;var EC;var x,y,mC,iC,cx,cy;tC( k){var g=new GI(k);var h=g.LE;var i,j;if(g.CH){i=-(g.IF.mC~/2-g.JF.x);j=-(g.IF.iC~/2-g.JF.y);}else{i=-g.LE.mC~/2;j=-g.LE.iC~/2;}src=new sB.Rect(h.x,h.y,h.mC,h.iC);EC=new sB.Rect(i,j,h.mC,h.iC);}}class GK extends GD with KI{var canvas;var context;var hD;var xE=[new hE('START GAME'),new hE('INSTRUCTIONS'),new hE('CREDITS'),new hE('HIGHSCORE')];GK(this.canvas){context=canvas.context2D;}initialize(){hD=UF(CB,NB)..textBaseline='top'..font='20px D3Radicalism'..globalAlpha=0.5;canvas.onMouseMove.listen((i){var h=RD.YE(i);xE.forEach(( g){if(g.rect.containsPoint(h)){g.sE=true;}else{g.sE=false;}});});canvas.onMouseDown.listen((i){var h=RD.YE(i);if(xE[0].rect.containsPoint(h)){if(!BB.LF)BB.LF=true;if(!BB.paused)BB.paused=false;}});} xB(){context.save();try {hD..clear()..fillStyle='gray'..fillRect(0,0,CB,NB)..vG(10,10,CB-20,NB-20,50,strokeStyle:'blue',fillStyle:'red');xE.forEach(( g){var i=g.sE?'gold':'white';var h=hD.fJ(g.label);hD..vG(g.rect.left,g.rect.top,g.rect.width,g.rect.height,20,strokeStyle:'green',fillStyle:i)..DJ(g.label,g.rect.left+(g.rect.width-h.width)~/2,g.rect.top+(g.rect.height-h.height)~/2,[0,'black',1,'blue']);});context.translate(SG(n).x,SG(n).y);context.drawImage(hD.canvas,0,0);}finally {context.restore();}} XB()=>!BB.UC;} FI( i){var h;var g='resources/sfx/';var j=i.lastIndexOf('/');if(j<0){g='/${g}';}else{g='${i.substring(0,j)}/${g}';}try {h=new IK(g);var k=h.MJ('non-positional');k.VJ=false;}catch (m){h=new IK(g);}h.hG('shoot','shoot.ogg').load();return h;}class GI{var LE;var CH;var JF;var IF;GI( g):LE=new jF(g["frame"]),CH=g["trimmed"],JF=new jF(g["spriteSourceSize"]),IF=new HI(g["sourceSize"]);}class HK{final  dateTime;final  BD,dG;HK(this.dG,this.BD):dateTime=new DateTime.now(); NF()=>{'score':BD,'level':dG,'ms':dateTime.millisecondsSinceEpoch,'utc':dateTime.isUtc};}class jF{var x,y,mC,iC;jF( g):x=g["x"].toInt(),y=g["y"].toInt(),mC=g["w"].toInt(),iC=g["h"].toInt();}class IK implements aC{var baseURL;IK([this.baseURL='/']);var PO=new Map<String,II>(); hG( h, i){var g=PO[h];if(g!=null){return g;}g=new II.oK(this,h,"${baseURL}${i}");PO[h]=g;return g;} oG( h, g,[ looped=false]){PO[g].play();return null;} noSuchMethod( g){}}class HI{var mC,iC;HI( g):mC=g["w"].toInt(),iC=g["h"].toInt();}class II implements nB{final  QO;var RO;var SO;var EE=new List();II.oK(this.QO,this.RO,this.SO); load(){var g=new sB.AudioElement();var h=new ZB.Completer<nB>();g.onLoad.listen((i)=>h.complete(this));g.src=SO;EE.add(g);return h.future;} play(){var h=EE.where((i)=>i.ended).iterator;var g;if(h.moveNext()){g=h.current;}else{g=EE[0].clone(false);EE.add(g);}g.play();} noSuchMethod( g){}}class JI extends XD{var context;var jB;var FB;JI(this.context); initialize(){super.initialize();jB=new s<DB>(DB,n);var g=new s<pB>(pB,n);FB=g.get(fB);} xB(){var h=YB.eB(GC);var g=jB.get(h);bJ(g);} bJ( g){context.setTransform(1,0,0,1,0,0);context.translate(-g.x,-g.y);context..fillStyle="black"..beginPath()..rect(g.x,g.y,CB,NB)..fill()..stroke()..closePath();} XB()=>!FB.MB||status.hC;}class JK extends JI{var FB;JK(g):super(g); initialize(){super.initialize();var g=new s<pB>(pB,n);FB=g.get(fB);} xB(){var i=YB.eB(GC);var h=jB.get(i);var g=FB.jC;context.setTransform(1/(1+g/50),0,0,1+g,CB/2-(CB/(2*(1+g/50))),0);context.translate(-h.x,-h.y-(20*g));context.globalAlpha=hB.max(0.05,1-(g));context..fillStyle="black"..beginPath()..rect(h.x,h.y,CB,NB)..fill()..stroke()..closePath();context.globalAlpha=1;} XB()=>FB.MB&&!status.hC;}class KK extends GD{const  QC=64;const  PC=64;var CC;var dB;var context;var jB;var YB;KK(this.context,this.dB); initialize(){jB=new s<DB>(DB,n);YB=n.vB(new AC().runtimeType);GJ();} GJ(){var u=n.vB(new eE().runtimeType);var p=new s<q>(q,n);CC=new sB.CanvasElement(width:HB+QC*2,height:GB+PC*2);var h=CC.context2D;h.setTransform(1,0,0,1,0,0);h.translate(QC,PC);var j=dB.oD['star_00.png'];var g=UF(128,128)..translate(64,64)..drawImageToRect(dB.NE,j.EC,sourceRect:j.src);var k=new List<sB.CanvasElement>(32);for(int i=0;i<32;i++ ){g.cJ(hue:WB.nextDouble(),saturation:0.5+WB.nextDouble()/2,lightness:0.5+WB.nextDouble()/2);k[i]=g.copy();}u.CJ(oF).forEach((o){var m=p.get(o);h.drawImage(k[WB.nextInt(20)],m.x-g.canvas.width~/2,m.y-g.canvas.height~/2);o.cD();});} xB(){var v=YB.eB(GC);var g=jB.get(v);context.save();try {context.beginPath();var m=g.x+QC;var o=g.y+PC;if(g.x<HB-CB&&g.y<GB-NB){context.drawImageScaledFromSource(CC,m,o,CB,NB,g.x,g.y,CB,NB);}else if(g.x>HB-CB&&g.y<GB-NB){var j=HB-g.x+QC;var k=CB-(HB-g.x)+QC;var p=HB-QC;context.drawImageScaledFromSource(CC,m,o,j,NB,g.x,g.y,j,NB);context.drawImageScaledFromSource(CC,0,o,k,NB,p,g.y,k,NB);}else if(g.x<HB-CB&&g.y>GB-NB){var h=GB-g.y+PC;var i=NB-(GB-g.y)+PC;var u=GB-PC;context.drawImageScaledFromSource(CC,m,o,CB,h,g.x,g.y,CB,h);context.drawImageScaledFromSource(CC,m,0,CB,i,g.x,u,CB,i);}else{var j=HB-g.x+QC;var k=CB-(HB-g.x)+QC;var h=GB-g.y+PC;var i=NB-(GB-g.y)+PC;var p=HB-QC;var u=GB-PC;context.drawImageScaledFromSource(CC,m,o,j,h,g.x,g.y,j,h);context.drawImageScaledFromSource(CC,0,o,k,h,p,g.y,k,h);context.drawImageScaledFromSource(CC,m,0,j,i,g.x,u,j,i);context.drawImageScaledFromSource(CC,0,0,k,i,p,u,k,i);}context.closePath();}finally {context.restore();}}}class LK extends qC{var context;var EB;var mG;var xC;LK(this.context):super(TB.qB([wC,q])); initialize(){EB=new s<q>(q,n);mG=new s<wC>(wC,n);var g=new s<DB>(DB,n);var h=n.vB(new AC().runtimeType);var i=h.eB(GC);xC=g.get(i);} lC( h){var g=EB.get(h);var i=mG.get(h);context.save();try {if(xC.x>HB-CB&&g.x<CB){context.translate(HB,0);}if(xC.y>GB-NB&&g.y<NB){context.translate(0,GB);}context.translate(g.x,g.y);context.fillStyle=i.color;context.fillRect(0,0,1,1);}finally {context.restore();}}}class MK extends XD{const uF="Score:";const tF="Level:";var context;var wG,fG;var dB;MK(this.context,this.dB); initialize(){super.initialize();var g=context.measureText(uF);wG=550-g.width;g=context.measureText(tF);fG=550-g.width;} xB(){context.save();context.transform(1,0,0,1,90,12);try {context.beginPath();context.fillStyle="black";context.fillRect(0,0,200,15);context.fillStyle="green";context.fillRect(0,0,200*status.FC/status.gD,15);context.closePath();}finally {context.restore();}var g=dB.oD['hud_dummy.png'];context.translate(-g.EC.left,-g.EC.top);context.drawImageToRect(dB.NE,g.EC,sourceRect:g.src);context.translate(g.EC.left,g.EC.top);var j="${BB.BD.toStringAsFixed(0)}";var i="${(BB.JE+1).toString()}";context.fillText(tF,fG,11);context.fillText(uF,wG,31);var h=context.measureText(i);context.fillText(i,680-h.width,11);h=context.measureText(j);context.fillText(j,680-h.width,31);}}class NK extends ZC{var context;var EB;var tG;var iB;NK(this.context):super(TB.qB([uC,q,LB])); initialize(){EB=new s<q>(q,n);tG=new s<uC>(uC,n);iB=new s<LB>(LB,n);} lD( k){context.save();context.transform(80/HB,0,0,80/GB,CB-90,10);try {context.fillStyle="black";context.beginPath();context.fillRect(0,0,HB,GB);context.closePath();k.forEach((h){var j=EB.get(h);var i=tG.get(h);var g=iB.get(h);context.fillStyle=i.color;context.strokeStyle=i.color;context.beginPath();context.fillRect(j.x-g.bB,j.y-g.bB,g.bB*2,g.bB*2);context.closePath();});}finally {context.restore();}} XB()=>true;}abstract class KI{var TO; SG( g){if(null==TO){var h=new s<DB>(DB,g);var i=g.vB(new AC().runtimeType);var j=i.eB(GC);TO=h.get(j);}return TO;}}class LI{static final  kF=new Map<String,sB.ImageElement>();static  MI( h, i( image)){var g=kF[h];if(null==g){g=new sB.ImageElement();g.onLoad.listen((j){kF[h]=g;i(g);});g.src="resources/img/${h}";}else{i(g);}}}abstract class XD extends GD{var YB;var fB;var status; initialize(){var g=new s<PB>(PB,n);YB=n.vB(new AC().runtimeType);fB=YB.eB(bC);status=g.get(fB);}}class q extends SB{var UO,VO,angle,rotationRate;q.pK();static  NI()=>new q.pK();factory q( i, h,{ angle: 0, rotationRate: 0}){var g=new sC.kK(q,NI);g.x=i;g.y=h;g.angle=angle;g.rotationRate=rotationRate;return g;} get x=>UO; get y=>VO;set x( g)=>UO=g%HB;set y( g)=>VO=g%GB;}abstract class lF extends ZC{static final  mF=CB+50;static final  nF=NB+50;static final  OI=HB-mF;static final  QI=GB-nF;var EB;var jB;var YB;lF( g):super(g.wF([q])); initialize(){EB=new s<q>(q,n);jB=new s<DB>(DB,n);YB=n.vB(new AC().runtimeType);} lD( m){var k=YB.eB(GC);var h=jB.get(k);var g=new AB<l>();m.forEach((i){var j=EB.get(i);if(KJ(j,h)&&LJ(j,h)){g.add(i);}});EF(g.readOnly);} KJ( i, h){var g=(h.x-i.x).abs();return (g<mF||g>OI);} LJ( i, h){var g=(h.y-i.y).abs();return (g<nF||g>QI);} EF( g); XB()=>true;}const  CB=800;const  NB=400;const  RI=100;const  GB=NB*4;const  HB=CB*2;class OK extends XD{var uB;var transform;var DD;var gB; initialize(){super.initialize();var i=new s<kB>(kB,n);var g=new s<q>(q,n);var h=new s<aB>(aB,n);var j=new s<OB>(OB,n);uB=i.get(fB);transform=g.get(fB);DD=h.get(fB);gB=j.get(fB);} xB(){if(!status.hC&&status.FC<0){uB.CD=false;gB.MB=false;gB.WC=OB.HD;status.hC=true;DD.TC=['spaceship.png'];transform.rotationRate=0.1;fB.FF(OC);fB.IE();}} XB()=>!status.hC;}const  iE=11;const  GC="CAMERA";const  bC="PLAYER";const  oF="GROUP_BACKGROUND";class DB extends SB{var UO,VO;DB.pK();static  NI()=>new DB.pK();factory DB({ x: 0, y: 0}){var g=new sC.kK(DB,NI);g.x=x;g.y=y;return g;} get x=>UO; get y=>VO;set x( g)=>UO=g%HB;set y( g)=>VO=g%GB;}final  WB=new hB.Random();final  BB=new jE();class jE{var JE=0;var eG=1.0;var yE=false;var paused=false;var LF=false;var VG=false;var BD=0.0; get UC=>LF&&!paused;} pF( k, j){var g=HC(k,j);var h=HC(0,KB.LC);var m=g*KB.MC(h);var i=g*KB.rC(h);return new w(m,i);}class w extends SB{var x,y;w.pK();static  NI()=>new w.pK();factory w( i, h){var g=new sC.kK(w,NI);g.x=i;g.y=h;return g;} get absolute=>hB.sqrt(x*x+y*y); get angle=>hB.atan2(y,x);} HC( g, i){var h=g+(i-g)*WB.nextDouble();return h;} qF( JB, p, u, nC, m){for(int o=0;o<nC;o++ ){var g=JB.gC();var KC=WB.nextDouble()*u*KB.MC(KB.LC*WB.nextDouble());var UB=WB.nextDouble()*u*KB.MC(KB.LC*WB.nextDouble());g.t(new q(p.x+KC,p.y+UB));var yB=m.absolute;var i=m.angle;var h=HC(0.8,2);var v=yB*h;var j;if(h<1){j=(h-0.8)*5;}else{j=2-h;}var k=0.05*HC(-j,j);var oC=hB.cos(i)*v+hB.cos(i+hB.PI/2)*k;var pC=hB.sin(i)*v+hB.sin(i+hB.PI/2)*k;g.t(new w(oC,pC));g.t(new wC("grey"));g.t(new oB(250+WB.nextInt(500)));g.fC();}}class OB extends SB{static const HD=0;static const SI=-1;static const TI=1;var MB;var pD;var WC;OB.pK();static  NI()=>new OB.pK();factory OB({ thrust: 0.0002}){var g=new sC.kK(OB,NI);g.pD=thrust;g.MB=false;g.WC=HD;return g;}}class PK extends qC{var xF;var EB;var VB;PK():super(TB.qB([OC,q,w])); initialize(){xF=new s<OC>(OC,n);EB=new s<q>(q,n);VB=new s<w>(w,n);} lC( i){var g=xF.get(i);var j=EB.get(i);var h=(g.angle-j.angle)%KB.LC;if(h>hB.PI){h-= KB.LC;}if(h.abs()>0.001){j.angle+= h*0.08;}else{var k=VB.get(i);k.x=g.uD*hB.cos(g.angle);k.y=g.uD*hB.sin(g.angle);}} XB()=>BB.UC;}abstract class BE extends lF{BE( g):super(g); initialize(){super.initialize();} EF( h){h.forEach((g)=>mD(g));} mD( g);}class IC extends SB with rF{var enabled,MB;var rD,wE;var zE,kC,AF,tD;IC.pK();static  NI()=>new IC.pK();factory IC({ cooldownTime: 5000.0, maxTimeActive: 400.0}){var g=new sC.kK(IC,NI);g.enabled=true;g.MB=false;g.rD=0.0;g.wE=maxTimeActive;g.qE=cooldownTime;g.yC=0.0;g.kC=null;g.zE=null;g.AF=null;g.tD=null;return g;} get lI{if(enabled&&GG)return true;return false;}}class QK extends qC{var VB;var lB;var qD;var DH;var EB;QK():super(TB.qB([OB,w,IB,q,IC])); initialize(){VB=new s<w>(w,n);lB=new s<IB>(IB,n);qD=new s<OB>(OB,n);DH=new s<IC>(IC,n);EB=new s<q>(q,n);} lC( k){var j=qD.get(k);var g=DH.get(k);if(j.MB||j.WC!=OB.HD||g.MB){var i=EB.get(k);var h=VB.get(k);var JB=lB.get(k);var o=hB.sqrt(2*j.pD/JB.value);if(j.WC!=OB.HD){i.angle=(i.angle+o*j.WC*15)%KB.LC;}if(g.MB){g.uG();if(g.kC==null){g.kC=hB.sqrt(h.x*h.x+h.y*h.y);g.zE=h.x;g.AF=h.y;g.tD=500*o;}var m=g.rD/g.wE;var p=hB.pow(1-(2*(-0.5+m).abs()),1.5);var u=g.zE*(1-m)+g.kC*KB.rC(i.angle)*m;var v=g.AF*(1-m)+g.kC*KB.MC(i.angle)*m;h.x=u+p*g.tD*KB.rC(i.angle);h.y=v+p*g.tD*KB.MC(i.angle);g.rD+= n.DC;if(g.rD>g.wE){g.MB=false;g.rD=0.0;h.x=g.kC*KB.rC(i.angle);h.y=g.kC*KB.MC(i.angle);g.kC=null;g.tD=null;}}else{g.yC-= n.DC;if(j.MB){h.x+= o*KB.rC(i.angle);h.y+= o*KB.MC(i.angle);}}}} XB()=>BB.UC;}class RK extends XD{var FB;var OE=false;RK():super(); initialize(){super.initialize();var g=new s<pB>(pB,n);FB=g.get(fB);} xB(){var g;if(!FB.QD){FB.jC+= 0.01+FB.jC*0.005;}else{FB.jC-= 0.01+FB.jC*0.005;if(FB.jC<0.001){FB.MB=false;FB.QD=false;}}if(FB.jC>0.5){if(!OE&&!FB.QD){OE=true;}}else{if(OE){OE=false;}}} XB()=>FB.MB&&!status.hC&&BB.UC;}class aB extends SB{var TC;var scale;var uE;aB.pK();static  NI()=>new aB.pK();factory aB( g,{ scale: 1}){return kE([g],scale,false);}factory aB.qK( g,{ scale: 1}){return kE(g,scale,true);}factory aB.rK( g, h){return kE(g.TC,h,g.uE);}static  kE( h, j, i){var g=new sC.kK(aB,NI);g.TC=h;g.scale=j;g.uE=i;return g;}}class PB extends SB{var FC,gD,NJ;var hC=false;PB.pK();static  NI()=>new PB.pK();factory PB({ maxHealth: 100, maxVelocity: 20}){var g=new sC.kK(PB,NI);g.gD=maxHealth;g.NJ=maxVelocity;g.FC=maxHealth;return g;}}class LB extends SB{var bB;LB.pK();static  NI()=>new LB.pK();factory LB( h){var g=new sC.kK(LB,NI);g.bB=h;return g;}}class IB extends SB{var value;IB.pK();static  NI()=>new IB.pK();factory IB( h){var g=new sC.kK(IB,NI);g.value=h;return g;}}class kB extends SB with rF{var CD;var GE,nE,mE;var RC;kB.pK();static  NI()=>new kB.pK();factory kB({ cooldownTime: 200.0, bulletSpeed: 0.5, bulletMass: 0.1, bulletDamage: 5.0, amount: 1}){var g=new sC.kK(kB,NI);g.GE=bulletSpeed;g.nE=bulletMass;g.mE=bulletDamage;g.RC=amount;g.CD=false;g.qE=cooldownTime;g.yC=0.0;return g;} get kI{if(CD&&GG)return true;return false;}}class SK extends qC{var EB;var VB;SK():super(TB.qB([q,w])); initialize(){EB=new s<q>(q,n);VB=new s<w>(w,n);} lC( h){var g=EB.get(h);var i=VB.get(h);g.x+= i.x*n.DC;g.y+= i.y*n.DC;g.angle+= g.rotationRate;} XB()=>BB.UC;}class oB extends SB{var kG,FD;oB.pK();static  NI()=>new oB.pK();factory oB( h){var g=new sC.kK(oB,NI);g.kG=h;g.FD=h;return g;} wI( g){FD-= g;if(OG){FD=0;}} get OG=>FD<=0; get nG=>FD/kG;}class TK extends GD{var kD;var jB;var YB;TK(); initialize(){kD=new s<q>(q,n);jB=new s<DB>(DB,n);YB=n.vB(new AC().runtimeType);} xB(){var i=YB.eB(bC);var j=YB.eB(GC);var h=kD.get(i);var g=jB.get(j);g.x=h.x-CB~/2;g.y=h.y-NB~/2;}}class uC extends SB{var color;uC.pK();static  NI()=>new uC.pK();factory uC( h){var g=new sC.kK(uC,NI);g.color=h;return g;}}class cC extends SB{var name;var PG;var MG;var UG,jG;var AG;var zF,BH;cC.pK();static  NI()=>new cC.pK();factory cC( h,{ healthGain: 0, massGain: 0, fillHealth: false, bullets: 0, bulletDamageGain: 0.0, thrustGain: 0.0, enableHyperDrive: false}){var g=new sC.kK(cC,NI);g.name=h;g.UG=healthGain;g.PG=fillHealth;g.AG=bullets;g.MG=enableHyperDrive;g.zF=bulletDamageGain;g.jG=massGain;g.BH=thrustGain;return g;}}class UK extends BE{var iB;var EH;var status;var transform;var body;var uB;var FB;var iG;var gB;UK():super(TB.qB([cC,q,LB])); initialize(){super.initialize();var h=n.vB(new AC().runtimeType);var g=h.eB(bC);iB=new s<LB>(LB,n);EH=new s<cC>(cC,n);var i=new s<kB>(kB,n);var o=new s<pB>(pB,n);var m=new s<PB>(PB,n);var j=new s<IB>(IB,n);var k=new s<OB>(OB,n);status=m.get(g);transform=EB.get(g);body=iB.get(g);uB=i.get(g);FB=o.get(g);gB=k.get(g);iG=j.get(g);} mD( h){var i=EB.get(h);var j=iB.get(h);if(bE.gE(transform.x,transform.y,body.bB,i.x,i.y,j.bB)){var g=EH.get(h);status.gD+= g.UG;if(g.PG){status.FC=status.gD;}uB.RC=uB.RC==iE?iE:uB.RC+g.AG;uB.mE+= g.zF;if(g.MG){FB.enabled=true;}iG.value+= g.jG;gB.pD+= g.BH;h.cD();}} end(){n.sG();} XB()=>!BB.paused&&status.FC>0;}class BC extends SB{var value,maxValue;BC.pK();static  NI()=>new BC.pK();factory BC( h){var g=new sC.kK(BC,NI);g.maxValue=h;g.value=h;return g;}}class vC extends SB{var AD;vC.pK();static  NI()=>new vC.pK();factory vC( h){var g=new sC.kK(vC,NI);g.AD=h;return g;}}class lE extends SB{lE.pK();static  NI()=>new lE.pK();factory lE()=>new sC.kK(lE,NI);}class dC extends SB{var source,clip;dC.pK();static  NI()=>new dC.pK();factory dC( h, i){var g=new sC.kK(dC,NI);g.source=h;g.clip=i;return g;}}class wC extends SB{var color;wC.pK();static  NI()=>new wC.pK();factory wC( h){var g=new sC.kK(wC,NI);g.color=h;return g;}}class OC extends SB{var angle,uD;OC.pK();static  NI()=>new OC.pK();factory OC({ angle, velocity}){var g=new sC.kK(OC,NI);g.angle=angle;g.uD=velocity;return g;}}class VK extends lF{var EB;var iB;var VB;var lB;var VC;var KD;var rE;var GF;var HF;VK():super(TB.qB([LB,q,w,IB])); initialize(){super.initialize();EB=new s<q>(q,n);iB=new s<LB>(LB,n);VB=new s<w>(w,n);lB=new s<IB>(IB,n);VC=new s<PB>(PB,n);KD=new s<BC>(BC,n);rE=new s<oB>(oB,n);GF=new s<ID>(ID,n);HF=new s<eC>(eC,n);} EF( p){if(p.size>1){for(int UB=0;UB<p.size-1;UB++ ){var m=p[UB];var k=EB.get(m);var GH=iB.get(m);for(int oC=UB+1;oC<p.size;oC++ ){var o=p[oC];var j=EB.get(o);var HH=iB.get(o);if(bE.gE(k.x,k.y,GH.bB,j.x,j.y,HH.bB)){var g=VB.get(m);var i=VB.get(o);var nC=lB.get(m);var pC=lB.get(o);var u=j.x-k.x;var JB=j.y-k.y;var vD=hB.sqrt(u*u+JB*JB);var IH=GH.bB+HH.bB;var mJ=IH-vD;if(mJ>0){var JH=i.x-g.x;var KH=i.y-g.y;var v=(vD-IH)/hB.sqrt(JH*JH+KH*KH);k.x+= v*g.x;k.y+= v*g.y;j.x+= v*i.x;j.y+= v*i.y;u=j.x-k.x;JB=j.y-k.y;}var h=hB.atan2(JB,u);var LH=hB.sqrt(g.x*g.x+g.y*g.y);var VE=hB.sqrt(i.x*i.x+i.y*i.y);var MH=hB.atan2(g.y,g.x);var NH=hB.atan2(i.y,i.x);var WE=LH*hB.cos(MH-h);var nJ=LH*hB.sin(MH-h);var OH=VE*hB.cos(NH-h);var oJ=VE*hB.sin(NH-h);var KC=WE*nC.value;var yB=OH*pC.value;var PH=nC.value+pC.value;var QH=(KC+2*yB-pC.value*WE)/PH;var RH=(yB+2*KC-nC.value*OH)/PH;var SH=nJ;var TH=oJ;g.x=hB.cos(h)*QH+hB.cos(h+hB.PI/2)*SH;g.y=hB.sin(h)*QH+hB.sin(h+hB.PI/2)*SH;i.x=hB.cos(h)*RH+hB.cos(h+hB.PI/2)*TH;i.y=hB.sin(h)*RH+hB.sin(h+hB.PI/2)*TH;XJ(m,o,KC,yB);lJ(m,o);}}}}} XJ( g, h, j, m){var i=VC.wB(g);var k=VC.wB(h);var o=KD.wB(g);var p=KD.wB(h);var v=GF.wB(g);var u=GF.wB(h);var JB=HF.wB(g);var UB=HF.wB(h);CG(i,p,j,m);CG(k,o,j,m);BG(v,UB,k);BG(u,JB,i);} CG( g, h, j, i){if(null!=g){g.FC-= (i.abs()+j.abs())/5;if(null!=h)g.FC-= h.value;}} BG( i, g, h){if(null!=i&&null!=g){if(null!=h&&h.FC<0){BB.BD+= g.bG;}else{BB.BD+= g.JG;}}} lJ( i, j){var g=rE.wB(i);var h=rE.wB(j);if(null!=g){g.FD*= 0.8;}if(null!=h){h.FD*= 0.8;}} XB()=>BB.UC;}class pB extends SB{var enabled,MB,QD;var jC;pB.pK();static  NI()=>new pB.pK();factory pB(){var g=new sC.kK(pB,NI);g.enabled=false;g.MB=false;g.QD=false;g.jC=0.0;return g;}}class eC extends SB{var JG,bG;eC.pK();static  NI()=>new eC.pK();factory eC( h, i){var g=new sC.kK(eC,NI);g.JG=h;g.bG=i;return g;}}class ID extends SB{ID.pK();factory ID()=>new sC.kK(ID,()=>new ID.pK());}abstract class rF{var yC,qE; get GG=>yC<=0; uG(){yC=qE;}}class WK extends qC{var EB;var DG;var VB;var lB;WK():super(TB.qB([kB,q,w,IB])); initialize(){EB=new s<q>(q,n);VB=new s<w>(w,n);lB=new s<IB>(IB,n);DG=new s<kB>(kB,n);} lC( h){var g=DG.get(h);if(g.kI){xI(h,g);}else if(g.yC>0){g.yC-= n.DC;}} xI( o, g){var j=EB.get(o);var i=VB.get(o);var u=lB.get(o);g.uG();var UB=KB.rC(j.angle);var v=KB.MC(j.angle);for(int m=0;m<g.RC;m++ ){var k;if(g.RC==1){k=j.angle;}else{k=j.angle+hB.PI/4-((hB.PI/(2*(g.RC-1)))*m);}var h=n.gC();h.t(new q(j.x+hB.cos(k)*26,j.y+hB.sin(k)*26));h.t(new w(i.x+g.GE*UB,i.y+g.GE*v));h.t(new LB(2));h.t(new IB(g.nE));h.t(new aB('bullet_dummy.png'));h.t(new oB(2500));h.t(new BC(g.mE));h.t(new dC('non-positional','shoot'));h.t(new ID());h.fC();} JB( i, KC){var p=i*u.value;var yB=g.GE*KC*g.nE*g.RC;p=p-yB;return p/u.value;}i.x=JB(i.x,UB);i.y=JB(i.y,v);} XB()=>BB.UC;}class XK extends qC{var sD;var KD;XK():super(TB.qB([oB])); initialize(){sD=new s<oB>(oB,n);KD=new s<BC>(BC,n);} lC( g){var i=sD.get(g);if(i.OG){g.cD();}else{i.wI(n.DC);var h=KD.wB(g);if(null!=h){h.value=h.maxValue*i.nG;}}} XB()=>BB.UC;}class YK extends BE{var VC;var yG;var iB;var VB;var lB;var nD;YK():super(TB.qB([vC,LB,PB,w,IB,aB])); initialize(){super.initialize();VC=new s<PB>(PB,n);yG=new s<vC>(vC,n);iB=new s<LB>(LB,n);VB=new s<w>(w,n);lB=new s<IB>(IB,n);nD=new s<aB>(aB,n);} mD( h){var UB=VC.get(h);if(UB.FC<=0){var JB=EB.get(h);var i=yG.get(h);var WE=lB.get(h);var u=VB.get(h);var m=iB.get(h);var KC=nD.get(h);var VE=hB.PI*m.bB*m.bB;var p=2*hB.PI/i.AD;var v=hB.sqrt(i.AD);var o=m.bB/v;var nC=(1*hB.PI/6)/((i.AD-1));var vD=u.angle-hB.PI/12;var yB=u.absolute;var k;if(i.AD==2){k=o;}else{k=hB.sin((180-p)/2)*o/hB.sin(p);}k+= 10;for(int j=0;j<i.AD;j++ ){var oC=j*p;var g=n.gC();g.t(new q(JB.x+k*hB.cos(oC),JB.y+k*hB.sin(oC),angle:WB.nextDouble()*KB.LC,rotationRate:HC(0.15,0.35)));g.t(new w(yB*KB.rC(vD+nC*j),yB*KB.MC(vD+nC*j)));var pC=HC(0.2,0.5);g.t(new aB.rK(KC,KC.scale/v));g.t(new IB(WE.value/i.AD));g.t(new uC("#333"));g.t(new PB(maxHealth:UB.gD/v));g.t(new LB(o));g.t(new eC(10*pC,100*pC*BB.eG));if(o>10){g.t(new vC(HC(2,4).round().toInt()));}else{g.t(new lE());}g.fC();}qF(n,JB,m.bB,15*hB.sqrt(VE).toInt(),u);h.cD();}}}class ZK extends BE{var VC;var iB;var VB;ZK():super(TB.qB([lE,PB,q,LB,w])); initialize(){super.initialize();VC=new s<PB>(PB,n);iB=new s<LB>(LB,n);VB=new s<w>(w,n);} mD( g){var j=VC.get(g);if(j.FC<=0){var i=EB.get(g);var h=iB.get(g);var k=VB.get(g);qF(n,i,h.bB,(hB.PI*h.bB*h.bB).toInt(),k);g.cD();}}}